{% extends "_base.html" %}
{% block content %}

		<form id="filters" method="GET">
			<div class="typefilter">
				zeige nur: 

			  {% if user.is_staff %}
			      <label>
			      	<input name="f" value="i" type="checkbox" {% if 'i' in filters %} checked{% endif %}>
			      		<span class="label label-info">Neu eingegangen</span>
			      </label>
		      {% endif %}

		      <label>
		      	<input name="f" value="s" type="checkbox" {% if 's' in filters %} checked{% endif %}>
		      		<span class="label label-primary">Sucht Unterst端tzung</span>
		      </label>
		      <label>
		      	<input name="f" value="d" type="checkbox" {% if 'd' in filters %} checked{% endif %}>
		      		<span class="label label-info">In Diskussion</span>
		      </label>
		      <label>
		      	<input name="f" value="e" type="checkbox" {% if 'e' in filters %} checked{% endif %}>
		      		<span class="label label-info">Wird 端berarbeitet</span>
		      </label>
		      <label>
		      	<input name="f" value="v" type="checkbox" {% if 'v' in filters %} checked{% endif %}>
		      		<span class="label label-danger">Abstimmung</span>
		      </label>
		      <label>
		      	<input name="f" value="a" type="checkbox" {% if 'a' in filters %} checked{% endif %}>
		      		<span class="label label-success">Angenommen</span>
		      </label>
		      <label>
		      	<input name="f" value="r" type="checkbox" {% if 'r' in filters %} checked{% endif %}>
		      		<span class="label label-default">Abgelehnt</span>
		      </label>
		    </div>
		 </form>

   {% for init in initiatives %}

			<h2 class="init-title"><a href="/initiative/{{init.id}}">{{init.title}}</a></h2>
			<p>
			    {% ifequal init.state 'i' %}
			      <span class="label label-primary">Neu eingegangen</span>
			    {% endifequal %}

			    {% ifequal init.state 's' %}
			      <span class="label label-primary">Sucht Unterst端tzung</span>
			    {% endifequal %}

			    {% ifequal init.state 'd' %}
			      <span class="label label-info">In Diskussion</span>
			    {% endifequal %}

			    {% ifequal init.state 'e' %}
			      <span class="label label-info">Wird 端berarbeitet</span>
			    {% endifequal %}

			    {% ifequal init.state 'v' %}
			      <span class="label label-danger">Abstimmung</span>
			    {% endifequal %}

			    {% ifequal init.state 'a' %}
			      <span class="label label-success">Angenommen</span>
			    {% endifequal %}

			    {% ifequal init.state 'r' %}
			      <span class="label label-default">Abgelehnt</span>
			    {% endifequal %}

				{{init.summary}}
			</p>
   {% endfor %}

{% endblock %}


{% block body-javascript %}
    {{ block.super }}

  <script type="text/javascript">
  	$(function(){
  		var submitTimeout = null;
	    $('.typefilter input').change(function(item) {
	    	if (submitTimeout) window.clearTimeout(submitTimeout);
	    	submitTimeout = window.setTimeout(function() {
	    		$("#filters").submit();
	    	}, 900);

	    });	
  	});
</script>
{% endblock %}
